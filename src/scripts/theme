#!/usr/bin/env zsh
# theme - Terminal theme management wrapper
#
# DESCRIPTION:
#   Wrapper script that delegates to the main theme switcher implementation.
#   Provides a convenient command-line interface for theme switching.
#
# USAGE:
#   theme [THEME|OPTION]
#
#   theme         # Auto-detect based on macOS appearance
#   theme dark    # Switch to dark theme
#   theme light   # Switch to light theme
#   theme --help  # Show detailed help
#
# This is a convenience wrapper - the main implementation is in:
# ~/.dotfiles/src/theme/switch-theme.sh

# Find the theme switcher script using multiple methods for robustness
DOTFILES="${DOTFILES:-$HOME/.dotfiles}"
if [[ -f "$DOTFILES/src/theme/switch-theme.sh" ]]; then
    THEME_SWITCHER="$DOTFILES/src/theme/switch-theme.sh"
elif [[ -f "$(dirname "$0")/../theme/switch-theme.sh" ]]; then
    THEME_SWITCHER="$(dirname "$0")/../theme/switch-theme.sh"
else
    echo "Error: Theme switcher not found" >&2
    echo "Expected location: $DOTFILES/src/theme/switch-theme.sh" >&2
    exit 1
fi

# Verify the theme switcher exists and is executable
if [[ ! -f "$THEME_SWITCHER" ]]; then
    echo "Error: Theme switcher not found at $THEME_SWITCHER" >&2
    exit 1
fi

if [[ ! -x "$THEME_SWITCHER" ]]; then
    chmod +x "$THEME_SWITCHER"
fi

# Delegate all arguments to the main theme switcher
exec "$THEME_SWITCHER" "$@"