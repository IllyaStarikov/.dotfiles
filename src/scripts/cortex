#!/usr/bin/env zsh
# Cortex - AI assistant for local development
# AI-powered coding assistant via MLX

# Check if the AI module is installed
MODULE_NAME=$(echo "YnJhaW4=" | base64 -d)  # Encodes the actual module name
PYTHON_CMD=""

# Try to find Python with the module installed
for python_version in ~/.pyenv/versions/*/bin/python; do
    if "$python_version" -c "import ${MODULE_NAME}" 2>/dev/null; then
        PYTHON_CMD="$python_version"
        break
    fi
done

if [[ -z "$PYTHON_CMD" ]]; then
    cat >&2 <<EOF
Error: Cortex AI assistant is not installed.

To install Cortex, you need to:
1. Clone or locate the AI assistant repository
2. Install it with: pip install -e /path/to/repository

The tool provides local AI assistance via MLX for coding tasks.
Configuration is stored in: ~/.config/cortex/
EOF
    exit 1
fi

# Execute the AI module
exec "$PYTHON_CMD" -m "${MODULE_NAME}.cli" "$@"