# ════════════════════════════════════════════════════════════════════════════════════════════════════════════
# 🚀 ALACRITTY CONFIGURATION - Production-Ready Terminal Emulator
# ════════════════════════════════════════════════════════════════════════════════════════════════════════════
# Optimized for speed, modern workflows, and seamless integration with Neovim, tmux, and Zsh
# ════════════════════════════════════════════════════════════════════════════════════════════════════════════

# ────────────────────────────────────────────────────────────────────────────────────────────────────────────
# ⌨️ KEYBOARD BINDINGS - macOS Native + Power User Shortcuts
# ────────────────────────────────────────────────────────────────────────────────────────────────────────────

# Core macOS shortcuts
[[keyboard.bindings]]
action = "SpawnNewInstance"
key = "N"
mods = "Command"

[[keyboard.bindings]]
action = "Quit"
key = "Q"
mods = "Command"

[[keyboard.bindings]]
action = "ToggleFullscreen"
key = "Return"
mods = "Command"

# Enhanced clipboard operations
[[keyboard.bindings]]
action = "Copy"
key = "C"
mods = "Command"

[[keyboard.bindings]]
action = "Paste"
key = "V"
mods = "Command"

# Advanced text selection - Command+A is handled by default

# Window management
[[keyboard.bindings]]
action = "Hide"
key = "H"
mods = "Command"

[[keyboard.bindings]]
action = "Minimize"
key = "M"
mods = "Command"

# Font size control
[[keyboard.bindings]]
action = "IncreaseFontSize"
key = "Plus"
mods = "Command"

[[keyboard.bindings]]
action = "DecreaseFontSize"
key = "Minus"
mods = "Command"

[[keyboard.bindings]]
action = "ResetFontSize"
key = "Key0"
mods = "Command"

# Search functionality
[[keyboard.bindings]]
action = "SearchForward"
key = "F"
mods = "Command"

[[keyboard.bindings]]
action = "SearchBackward"
key = "B"
mods = "Command|Shift"

# Window/Tab management - Alacritty doesn't support tabs, only windows
[[keyboard.bindings]]
action = "CreateNewWindow"
key = "T"
mods = "Command"

# Use tmux for tab-like functionality
# [[keyboard.bindings]]
# chars = "\u0001c"  # Ctrl-A c (new tmux window)
# key = "T"
# mods = "Command"

[[keyboard.bindings]]
chars = "\u0001n"  # Ctrl-A n (next tmux window)
key = "]"
mods = "Command|Shift"

[[keyboard.bindings]]
chars = "\u0001p"  # Ctrl-A p (previous tmux window)
key = "["
mods = "Command|Shift"

# Clear terminal (Cmd+K)
[[keyboard.bindings]]
chars = "\u000c"  # Ctrl-L
key = "K"
mods = "Command"

# ────────────────────────────────────────────────────────────────────────────────────────────────────────────
# 🎵 AUDIO & VISUAL FEEDBACK
# ────────────────────────────────────────────────────────────────────────────────────────────────────────────

[bell]
animation = "EaseOutExpo"
color = "0x88c0d0"  # Nord-inspired blue
duration = 100      # Brief visual feedback
command = "None"    # No audio bell for productivity

# ────────────────────────────────────────────────────────────────────────────────────────────────────────────
# ⚙️ GENERAL CONFIGURATION
# ────────────────────────────────────────────────────────────────────────────────────────────────────────────

[general]
import = ["~/.config/alacritty/theme.toml"]
live_config_reload = true

# ────────────────────────────────────────────────────────────────────────────────────────────────────────────
# 🎨 COLOR CONFIGURATION
# ────────────────────────────────────────────────────────────────────────────────────────────────────────────

[colors]
draw_bold_text_with_bright_colors = true
transparent_background_colors = true

# ────────────────────────────────────────────────────────────────────────────────────────────────────────────
# 🌍 ENVIRONMENT VARIABLES
# ────────────────────────────────────────────────────────────────────────────────────────────────────────────

[env]
TERM = "alacritty"  # Use alacritty terminfo for better compatibility
COLORTERM = "truecolor"
# Ensure UTF-8 locale for proper symbol rendering
LANG = "en_US.UTF-8"
LC_ALL = "en_US.UTF-8"
LC_CTYPE = "en_US.UTF-8"

# ────────────────────────────────────────────────────────────────────────────────────────────────────────────
# 📜 SCROLLING & HISTORY
# ────────────────────────────────────────────────────────────────────────────────────────────────────────────

[scrolling]
history = 50000      # Default: 10000
multiplier = 3       # Faster scrolling

# ────────────────────────────────────────────────────────────────────────────────────────────────────────────
# 📝 TEXT SELECTION & CLIPBOARD
# ────────────────────────────────────────────────────────────────────────────────────────────────────────────

[selection]
save_to_clipboard = true  # Auto-copy selection
semantic_escape_chars = ",│`|:\"' ()[]{}<>\t"

# ────────────────────────────────────────────────────────────────────────────────────────────────────────────
# 🖼️ WINDOW CONFIGURATION
# ────────────────────────────────────────────────────────────────────────────────────────────────────────────

[window]
decorations = "full"        # Required for macOS tabs to work
dynamic_title = true
opacity = 1.0               # Full opacity for better performance
startup_mode = "Windowed"
resize_increments = true    # Resize by character grid
option_as_alt = "Both"      # Proper Alt key behavior on macOS

# macOS specific window options
decorations_theme_variant = "None"  # Follow system theme

[window.dimensions]
columns = 120
lines = 40

[window.padding]
x = 8
y = 8

[window.position]
x = 100
y = 100

# ────────────────────────────────────────────────────────────────────────────────────────────────────────────
# 🖋️ FONT CONFIGURATION (Enhanced)
# ────────────────────────────────────────────────────────────────────────────────────────────────────────────

[font]
size = 18.0  # More reasonable default font size
# Enable built-in font fallbacks for better symbol support
builtin_box_drawing = true   # Enable for better box drawing character rendering

# Enable ligatures for JetBrainsMono
# IMPORTANT: Use "JetBrainsMono Nerd Font" (NOT "Mono" variant) for ligatures!
# The "Mono" variant specifically disables ligatures



[font.normal]
# JetBrainsMono Nerd Font with ligatures enabled
family = "JetBrainsMono Nerd Font"
style = "Regular"

[font.bold]
family = "JetBrainsMono Nerd Font"  # Ligatures work here too
style = "Bold"

[font.italic]
family = "JetBrainsMono Nerd Font"  # Ligatures work here too
style = "Italic"

[font.bold_italic]
family = "JetBrainsMono Nerd Font"  # Ligatures work here too
style = "Bold Italic"

# Font rendering optimizations
[font.offset]
y = 1  # Only non-default value

# ────────────────────────────────────────────────────────────────────────────────────────────────────────────
# 🖱️ MOUSE CONFIGURATION
# ────────────────────────────────────────────────────────────────────────────────────────────────────────────

[mouse]
hide_when_typing = true

[[mouse.bindings]]
mouse = "Middle"
action = "PasteSelection"

[[mouse.bindings]]
mouse = "Right"
action = "ExpandSelection"

[[mouse.bindings]]
mouse = "Left"
mods = "Command"
action = "ExpandSelection"

# ────────────────────────────────────────────────────────────────────────────────────────────────────────────
# 🔲 CURSOR CONFIGURATION - Visibility and Style
# ────────────────────────────────────────────────────────────────────────────────────────────────────────────

[cursor]
# Cursor style
style = { shape = "Block", blinking = "On" }

# Vi mode cursor style (when vi mode is enabled)
vi_mode_style = { shape = "Block", blinking = "Off" }

# Cursor blinking interval in milliseconds
blink_interval = 750

# Stop blinking after 15 seconds of inactivity (0 = always blink)
blink_timeout = 15

# ────────────────────────────────────────────────────────────────────────────────────────────────────────────
# 🐞 DEBUG CONFIGURATION
# ────────────────────────────────────────────────────────────────────────────────────────────────────────────

[debug]
log_level = "Warn"  # Only non-default setting
# ref_test = false  # Removed - not a valid config option

# ────────────────────────────────────────────────────────────────────────────────────────────────────────────
# 📝 VI MODE CONFIGURATION
# ────────────────────────────────────────────────────────────────────────────────────────────────────────────

# VI mode toggle
[[keyboard.bindings]]
key = "Space"
mods = "Shift|Control"
action = "ToggleViMode"

# VI mode navigation
[[keyboard.bindings]]
key = "K"
mods = "Control"
mode = "Vi"
action = "ScrollLineUp"

[[keyboard.bindings]]
key = "J"
mods = "Control"
mode = "Vi"
action = "ScrollLineDown"

[[keyboard.bindings]]
key = "U"
mods = "Control"
mode = "Vi"
action = "ScrollHalfPageUp"

[[keyboard.bindings]]
key = "D"
mods = "Control"
mode = "Vi"
action = "ScrollHalfPageDown"

[[keyboard.bindings]]
key = "B"
mods = "Control"
mode = "Vi"
action = "ScrollPageUp"

[[keyboard.bindings]]
key = "F"
mods = "Control"
mode = "Vi"
action = "ScrollPageDown"

[[keyboard.bindings]]
key = "G"
mode = "Vi"
action = "ScrollToBottom"

[[keyboard.bindings]]
key = "G"
mods = "Shift"
mode = "Vi"
action = "ScrollToTop"

# ────────────────────────────────────────────────────────────────────────────────────────────────────────────
# 🔍 SEARCH BINDINGS
# ────────────────────────────────────────────────────────────────────────────────────────────────────────────

[[keyboard.bindings]]
key = "Return"
mode = "Search"
action = "SearchFocusNext"

[[keyboard.bindings]]
key = "Return"
mods = "Shift"
mode = "Search"
action = "SearchFocusPrevious"

[[keyboard.bindings]]
key = "Escape"
mode = "Search"
action = "SearchCancel"

[[keyboard.bindings]]
key = "C"
mods = "Control"
mode = "Search"
action = "SearchCancel"

[[keyboard.bindings]]
key = "U"
mods = "Control"
mode = "Search"
action = "SearchClear"

[[keyboard.bindings]]
key = "N"
mode = "Search"
action = "SearchFocusNext"

[[keyboard.bindings]]
key = "N"
mods = "Shift"
mode = "Search"
action = "SearchFocusPrevious"
