# Iceberg Dark Theme for tmux
# Enhanced with battery, CPU, and other system monitors
# Based on: https://github.com/gkeep/iceberg-dark

# ==============================================================================
# THEME OVERRIDE - DISABLE ALL THEME PLUGINS
# ==============================================================================
# Remove any loaded theme plugins
set -gu @plugin
run-shell "rm -rf ~/.tmux/plugins/tokyo-night-tmux 2>/dev/null || true"

# Unset all Tokyo Night theme variables
set -gu @tokyo-night-tmux_theme
set -gu @tokyo-night-tmux_window_id_style
set -gu @tokyo-night-tmux_pane_id_style  
set -gu @tokyo-night-tmux_zoom_id_style
set -gu @tokyo-night-tmux_show_datetime
set -gu @tokyo-night-tmux_date_format
set -gu @tokyo-night-tmux_time_format
set -gu @tokyo-night-tmux_show_battery_widget
set -gu @tokyo-night-tmux_battery_name
set -gu @tokyo-night-tmux_battery_low_threshold
set -gu @tokyo-night-tmux_show_netspeed
set -gu @tokyo-night-tmux_netspeed_iface
set -gu @tokyo-night-tmux_netspeed_showip
set -gu @tokyo-night-tmux_netspeed_refresh
set -gu @tokyo-night-tmux_show_git
set -gu @tokyo-night-tmux_show_music
set -gu @tokyo-night-tmux_show_path
set -gu @tokyo-night-tmux_path_format
set -gu @tokyo-night-tmux_show_wbg
set -gu @tokyo-night-tmux_transparent_status_bar

# ==============================================================================
# PLUGIN CONFIGURATION
# ==============================================================================
# Configure battery plugin
set -g @batt_icon_charge_tier8 'üåï'
set -g @batt_icon_charge_tier7 'üåñ'
set -g @batt_icon_charge_tier6 'üåñ'
set -g @batt_icon_charge_tier5 'üåó'
set -g @batt_icon_charge_tier4 'üåó'
set -g @batt_icon_charge_tier3 'üåò'
set -g @batt_icon_charge_tier2 'üåò'
set -g @batt_icon_charge_tier1 'üåë'
set -g @batt_icon_status_charged 'üîã'
set -g @batt_icon_status_charging '‚ö°'
set -g @batt_icon_status_discharging 'üîã'
set -g @batt_icon_status_attached 'üîå'
set -g @batt_icon_status_unknown '‚ùì'
set -g @batt_remain_short true

# Configure CPU plugin
set -g @cpu_low_icon "="
set -g @cpu_medium_icon "‚â°"
set -g @cpu_high_icon "‚â£"
set -g @cpu_percentage_format "%3.0f%%"
set -g @ram_percentage_format "%3.0f%%"

# ==============================================================================
# ICEBERG DARK COLOR PALETTE
# ==============================================================================
# Background: #161821
# Dark Background: #1e2132
# Selection: #3e445e
# Foreground: #c6c8d1
# Comment: #6b7089
# Red: #e27878
# Green: #b4be82
# Yellow: #e2a478
# Blue: #84a0c6
# Purple: #a093c7
# Cyan: #89b8c2

# ==============================================================================
# STATUS BAR CONFIGURATION
# ==============================================================================
set -g status-position bottom
set -g status-justify centre
set -g status-style "bg=#1e2132"

# ==============================================================================
# WINDOW STYLES
# ==============================================================================
set -g window-style "bg=#161821"
set -g window-active-style "bg=#161821"

# ==============================================================================
# STATUS LEFT
# ==============================================================================
# Format: Session | Host | Git branch
set -g status-left "#[fg=#161821,bg=#84a0c6,bold]  #S #[fg=#84a0c6,bg=#3e445e,nobold]#[fg=#c6c8d1,bg=#3e445e]  #h #[fg=#3e445e,bg=#1e2132]"
set -g status-left-style ""
set -g status-left-length 100

# ==============================================================================
# STATUS RIGHT  
# ==============================================================================
# Format: CPU | Memory | Battery | Network | Date Time
set -g status-right "#[fg=#3e445e,bg=#1e2132]#[fg=#c6c8d1,bg=#3e445e] #{cpu_icon} #{cpu_percentage} #[fg=#3e445e,bg=#1e2132]#[fg=#3e445e,bg=#1e2132]#[fg=#c6c8d1,bg=#3e445e] #{ram_icon} #{ram_percentage} #[fg=#3e445e,bg=#1e2132]#[fg=#3e445e,bg=#1e2132]#[fg=#c6c8d1,bg=#3e445e] #{battery_icon_charge} #{battery_percentage} #[fg=#3e445e,bg=#1e2132]#[fg=#3e445e,bg=#1e2132]#[fg=#c6c8d1,bg=#3e445e]  %a %d %b #[fg=#84a0c6,bg=#3e445e]#[fg=#161821,bg=#84a0c6,bold]  %H:%M "
set -g status-right-style ""
set -g status-right-length 150

# ==============================================================================
# WINDOW STATUS
# ==============================================================================
set -g window-status-style "fg=#6b7089"
set -g window-status-format " #I:#W#F "
set -g window-status-current-style "fg=#c6c8d1,bold,bg=#3e445e"
set -g window-status-current-format " #I:#W#F "
set -g window-status-separator ""

# ==============================================================================
# PANE BORDERS
# ==============================================================================
set -g pane-active-border-style "fg=#84a0c6"
set -g pane-border-style "fg=#3e445e"

# ==============================================================================
# MESSAGE STYLES
# ==============================================================================
set -g message-style "fg=#c6c8d1,bg=#3e445e"
set -g message-command-style "fg=#c6c8d1,bg=#3e445e"

# ==============================================================================
# MODE STYLES
# ==============================================================================
set -g mode-style "fg=#161821,bg=#84a0c6"

# ==============================================================================
# CLOCK MODE
# ==============================================================================
set -g clock-mode-colour "#89b8c2"
set -g clock-mode-style 24
